<div class="contact_content">
  <!-- Template-driven form approach -->
  <div class="form-container" style="display: none;">
    <h2>Contact Us (Template-driven)</h2>
    <form 
      name="contact-template" 
      method="POST" 
      data-netlify="true"
      #templateForm="ngForm"
      (ngSubmit)="onTemplateSubmit(templateForm)"
      [hidden]="isSubmitting">
      
      <!-- Hidden field for Netlify -->
      <input type="hidden" name="form-name" value="contact-template">
      
      <div class="form-group">
        <label for="name">Name:</label>
        <input 
          type="text" 
          id="name"
          name="name" 
          ngModel 
          required 
          #name="ngModel"
          class="form-control"
          [class.error]="name.invalid && name.touched">
        <div *ngIf="name.invalid && name.touched" class="error-message">
          Name is required
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email:</label>
        <input 
          type="email" 
          id="email"
          name="email" 
          ngModel 
          required 
          email
          #email="ngModel"
          class="form-control"
          [class.error]="email.invalid && email.touched">
        <div *ngIf="email.invalid && email.touched" class="error-message">
          <span *ngIf="email.errors?.['required']">Email is required</span>
          <span *ngIf="email.errors?.['email']">Please enter a valid email</span>
        </div>
      </div>

      <div class="form-group">
        <label for="subject">Subject:</label>
        <select 
          name="subject" 
          id="subject"
          ngModel 
          required
          #subject="ngModel"
          class="form-control"
          [class.error]="subject.invalid && subject.touched">
          <option value="">Choose a subject</option>
          <option value="general">General Inquiry</option>
          <option value="support">Support</option>
          <option value="billing">Billing</option>
        </select>
      </div>

      <div class="form-group">
        <label for="message">Message:</label>
        <textarea 
          name="message" 
          id="message"
          ngModel 
          required 
          rows="5"
          #message="ngModel"
          class="form-control"
          [class.error]="message.invalid && message.touched">
        </textarea>
      </div>

      <!-- File upload -->
      <div class="form-group">
        <label for="attachment">Attachment (optional):</label>
        <input 
          type="file" 
          name="attachment" 
          id="attachment"
          class="form-control">
      </div>

      <!-- Netlify reCAPTCHA -->
      <div data-netlify-recaptcha="true"></div>

      <button 
        type="submit" 
        class="btn btn-primary"
        [disabled]="templateForm.invalid || isSubmitting">
        {{ isSubmitting ? 'Sending...' : 'Send Message' }}
      </button>
    </form>

    <!-- Success message -->
    <div *ngIf="showSuccess" class="success-message">
      <h3>Thank you!</h3>
      <p>Your message has been sent successfully. We'll get back to you soon.</p>
      <button (click)="resetForm()" class="btn btn-secondary">Send Another Message</button>
    </div>
  </div>

  <!-- Reactive form approach -->
  <div class="form-container">
    <h2>Contact Us</h2>
    <form [formGroup]="contactForm" (ngSubmit)="onReactiveSubmit()" [hidden]="isSubmitting || showSuccess" data-netlify="true">
      
      <div class="form-group">
        <label for="reactName">Name:</label>
        <input type="text" id="reactName" formControlName="name" class="form-control" [class.error]="contactForm.get('name')?.invalid && contactForm.get('name')?.touched">
        <div *ngIf="contactForm.get('name')?.invalid && contactForm.get('name')?.touched" class="error-message">
          Name is required
        </div>
      </div>

      <div class="form-group">
        <label for="reactEmail">Email:</label>
        <input type="email" id="reactEmail" formControlName="email" class="form-control" [class.error]="contactForm.get('email')?.invalid && contactForm.get('email')?.touched">
        <div *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" class="error-message">
          <span *ngIf="contactForm.get('email')?.errors?.['required']">Email is required</span>
          <span *ngIf="contactForm.get('email')?.errors?.['email']">Please enter a valid email</span>
        </div>
      </div>

      <div class="form-group">
        <label for="reactMessage">Message:</label>
        <textarea id="reactMessage" formControlName="message" rows="5" class="form-control" [class.error]="contactForm.get('message')?.invalid && contactForm.get('message')?.touched">
        </textarea>
        <div *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched" class="error-message">
          Message is required
        </div>
      </div>
      <!-- Netlify reCAPTCHA -->
      <div data-netlify-recaptcha="true"></div>
      <button type="submit" class="btn btn-primary" [disabled]="contactForm.invalid || isSubmitting">{{ isSubmitting ? 'Sending...' : 'Send Message' }}</button>
    </form>
  </div>
</div>